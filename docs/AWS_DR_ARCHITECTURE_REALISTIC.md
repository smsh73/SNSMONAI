# SNSMON-AI Disaster Recovery 아키텍처 및 비용 (현실적 산정)

**작성일**: 2026-02-04
**Primary Region**: ap-southeast-3 (Jakarta, Indonesia)
**DR Region**: ap-southeast-1 (Singapore)
**기준 환율**: 1 USD = 1,350 KRW

---

## 1. DR 전략 비교

| 전략 | RTO | RPO | 월 비용 | 적합 대상 |
|------|-----|-----|---------|----------|
| Backup & Restore | 24시간 | 24시간 | $500 | 개발/테스트 환경 |
| **Pilot Light** | 4-8시간 | 1시간 | **$1,200** | 일반 서비스 |
| **Warm Standby** | 30분-1시간 | 5분 | **$2,800** | **정부/금융 (권장)** |
| Hot Standby (Active-Active) | 수분 | 실시간 | $5,500+ | 미션 크리티컬 |

---

## 2. 권장 DR 아키텍처: Warm Standby

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                      PRIMARY REGION: ap-southeast-3 (Jakarta)                           │
│                                                                                         │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│  │                              Production Environment                              │   │
│  │                                                                                   │   │
│  │   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │   │
│  │   │     ALB     │    │   ECS/EC2   │    │     RDS     │    │    Redis    │     │   │
│  │   │  (Active)   │    │  (4 tasks)  │    │  (Primary)  │    │  (Primary)  │     │   │
│  │   └──────┬──────┘    └──────┬──────┘    └──────┬──────┘    └──────┬──────┘     │   │
│  │          │                  │                  │                  │             │   │
│  │          │                  │                  │ Async            │ Async       │   │
│  │          │                  │                  │ Replication      │ Replication │   │
│  │          │                  │                  │                  │             │   │
│  └──────────┼──────────────────┼──────────────────┼──────────────────┼─────────────┘   │
│             │                  │                  │                  │                 │
│  ┌──────────┼──────────────────┼──────────────────┼──────────────────┼─────────────┐   │
│  │          │                  │                  ▼                  ▼             │   │
│  │   ┌──────┴──────┐    ┌──────┴──────┐    ┌─────────────┐    ┌─────────────┐     │   │
│  │   │   Route 53  │    │     S3      │    │   S3 CRR    │    │  CloudWatch │     │   │
│  │   │  (Primary)  │    │  (Primary)  │───►│ Replication │    │    Logs     │     │   │
│  │   └─────────────┘    └─────────────┘    └──────┬──────┘    └──────┬──────┘     │   │
│  │                                                │                  │             │   │
│  └────────────────────────────────────────────────┼──────────────────┼─────────────┘   │
└───────────────────────────────────────────────────┼──────────────────┼─────────────────┘
                                                    │                  │
                    ════════════════════════════════╪══════════════════╪═════════════════
                           Cross-Region Replication │    Log Shipping  │
                    ════════════════════════════════╪══════════════════╪═════════════════
                                                    │                  │
┌───────────────────────────────────────────────────┼──────────────────┼─────────────────┐
│                       DR REGION: ap-southeast-1 (Singapore)          │                 │
│                                                    │                  │                 │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│  │                              Warm Standby Environment                            │   │
│  │                                                                                   │   │
│  │   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │   │
│  │   │     ALB     │    │   ECS/EC2   │    │     RDS     │◄───┤    Redis    │     │   │
│  │   │  (Standby)  │    │  (2 tasks)  │    │  (Replica)  │    │  (Replica)  │     │   │
│  │   │  Scaled-in  │    │  Min size   │    │  Read-only  │    │  Read-only  │     │   │
│  │   └──────┬──────┘    └──────┬──────┘    └──────┬──────┘    └──────┬──────┘     │   │
│  │          │                  │                  │                  │             │   │
│  │   ┌──────┴──────┐    ┌──────┴──────┐    ┌─────────────┐    ┌─────────────┐     │   │
│  │   │   Route 53  │    │     S3      │◄───│   S3 CRR    │    │  CloudWatch │◄────┤   │
│  │   │  (Failover) │    │  (Replica)  │    │   Bucket    │    │    Logs     │     │   │
│  │   └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘     │   │
│  │                                                                                   │   │
│  └─────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                         │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│  │                              Recovery Components                                 │   │
│  │                                                                                   │   │
│  │   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │   │
│  │   │ CloudFormat │    │    Lambda   │    │ Step Func.  │    │   SSM Auto  │     │   │
│  │   │   Stacks    │    │  Failover   │    │  Runbooks   │    │  Documents  │     │   │
│  │   └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘     │   │
│  │                                                                                   │   │
│  └─────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                         │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 3. DR 인프라 상세 비용 (Warm Standby)

### 3.1 DR Region 컴퓨팅 비용

| 서비스 | Primary (Jakarta) | DR (Singapore) | DR 월 비용 (USD) |
|--------|-------------------|----------------|------------------|
| **ECS Fargate** | | | |
| - API Service | 4 tasks (2vCPU, 4GB) | 2 tasks (1vCPU, 2GB) | $73 |
| - Web Service | 2 tasks (1vCPU, 2GB) | 1 task (0.5vCPU, 1GB) | $18 |
| - Crawler Workers | 4 tasks (2vCPU, 4GB) | 1 task (1vCPU, 2GB) | $36 |
| **EC2 (Optional)** | | | |
| - Bastion Host | t3.micro | t3.micro | $8 |
| **ALB** | 1 (Active) | 1 (Standby) | $22 |
| **NAT Gateway** | 2 (HA) | 1 (Single) | $45 |
| **컴퓨팅 소계** | | | **$202** |

### 3.2 DR Region 데이터베이스 비용

| 서비스 | Primary (Jakarta) | DR (Singapore) | DR 월 비용 (USD) |
|--------|-------------------|----------------|------------------|
| **Amazon RDS PostgreSQL** | | | |
| - Instance | db.r6g.large (Multi-AZ) | db.r6g.large (Read Replica) | $199 |
| - Storage (500GB gp3) | 500GB | 500GB (replicated) | $58 |
| - Cross-Region Data Transfer | - | ~500GB/월 | $45 |
| **ElastiCache Redis** | | | |
| - Cluster | r6g.large (2 nodes) | r6g.medium (1 node) | $95 |
| - Global Datastore | - | Replication enabled | $50 |
| **OpenSearch** | | | |
| - Cluster | t3.medium × 3 | t3.small × 2 | $74 |
| - Cross-cluster Replication | - | CCR enabled | $30 |
| **데이터베이스 소계** | | | **$551** |

### 3.3 스토리지 및 백업 비용

| 서비스 | 용량 | 월 비용 (USD) | 비고 |
|--------|------|--------------|------|
| **S3 Cross-Region Replication** | | | |
| - Source Bucket (Jakarta) | 6TB (평균) | - | Primary에 포함 |
| - Destination Bucket (Singapore) | 6TB (복제본) | $138 | S3 Standard |
| - Replication Data Transfer | 1TB/월 (신규) | $20 | $0.02/GB |
| - S3 Replication Time Control | - | $30 | 15분 내 복제 보장 |
| **RDS 자동 백업** | | | |
| - Primary Backup (Jakarta) | 500GB | - | 기본 포함 |
| - Cross-Region Backup Copy | 500GB | $58 | Singapore 저장 |
| **AWS Backup** | | | |
| - Backup Vault (Singapore) | 1TB | $50 | 통합 백업 관리 |
| - Cross-Region Copy | 500GB/월 | $25 | |
| **S3 Glacier (Archive)** | | | |
| - 장기 보관 (Singapore) | 3TB | $42 | 90일+ 데이터 |
| **스토리지 소계** | | | **$363** |

### 3.4 네트워킹 및 데이터 전송 비용

| 항목 | 월간 전송량 | 단가 (USD) | 월 비용 (USD) |
|------|-----------|-----------|--------------|
| **Cross-Region Data Transfer** | | | |
| - Jakarta → Singapore | | | |
|   - RDS Replication | 500GB | $0.09/GB | $45 |
|   - S3 Replication | 1TB | $0.02/GB | $20 |
|   - Redis Replication | 100GB | $0.09/GB | $9 |
|   - OpenSearch CCR | 200GB | $0.09/GB | $18 |
| **DR Region Outbound** | | | |
| - Internet Egress (Singapore) | 100GB | $0.12/GB | $12 |
| **VPC Peering** | | | |
| - Inter-region (if needed) | 50GB | $0.02/GB | $1 |
| **Route 53** | | | |
| - Health Checks | 4 endpoints | $0.75/check | $3 |
| - Failover Records | 10 records | $0.50/record | $5 |
| **Global Accelerator (Optional)** | | | |
| - Fixed fee | - | $18 | $18 |
| - Data transfer | 100GB | $0.015/GB | $2 |
| **네트워킹 소계** | | | **$133** |

### 3.5 모니터링 및 자동화 비용

| 서비스 | 구성 | 월 비용 (USD) |
|--------|------|--------------|
| **CloudWatch** | | |
| - Cross-Region Dashboard | 3 dashboards | $9 |
| - Alarms (DR Region) | 20 alarms | $10 |
| - Logs (DR Region) | 50GB | $25 |
| - Synthetics (Health Check) | 5 canaries | $6 |
| **AWS Lambda** | | |
| - Failover Automation | ~100K invocations | $5 |
| - Health Check Functions | ~500K invocations | $10 |
| **Step Functions** | | |
| - DR Runbooks | ~1000 transitions | $3 |
| **Systems Manager** | | |
| - Automation Documents | - | $0 |
| - Parameter Store | Advanced params | $5 |
| **EventBridge** | | |
| - DR Event Rules | 10 rules | $1 |
| **모니터링 소계** | | | **$74** |

### 3.6 보안 (DR Region)

| 서비스 | 구성 | 월 비용 (USD) |
|--------|------|--------------|
| **AWS WAF** | Rules replicated | $25 |
| **AWS Secrets Manager** | 10 secrets (replicated) | $8 |
| **AWS KMS** | 5 keys (multi-region) | $5 |
| **GuardDuty** | Singapore region | $35 |
| **Security Hub** | Singapore region | $15 |
| **보안 소계** | | **$88** |

---

## 4. DR 비용 총계

### 4.1 월간 DR 비용 (Warm Standby)

| 카테고리 | 월 비용 (USD) | 월 비용 (KRW) |
|----------|--------------|---------------|
| 컴퓨팅 (ECS, ALB, NAT) | $202 | 272,700 |
| 데이터베이스 (RDS, Redis, OpenSearch) | $551 | 743,850 |
| 스토리지 및 백업 (S3, Glacier, Backup) | $363 | 490,050 |
| 네트워킹 (Data Transfer, Route 53) | $133 | 179,550 |
| 모니터링 및 자동화 | $74 | 99,900 |
| 보안 | $88 | 118,800 |
| **DR 월간 총계** | **$1,411** | **1,904,850** |

### 4.2 연간 DR 비용

| 항목 | 비용 (USD) | 비용 (KRW) |
|------|-----------|-----------|
| DR 인프라 운영 (월 × 12) | $16,932 | 22,857,700 |
| DR 테스트 (분기별) | $800 | 1,080,000 |
| 추가 스토리지 증가분 | $1,200 | 1,620,000 |
| 예비비 (10%) | $1,893 | 2,555,770 |
| **DR 연간 총계** | **$20,825** | **약 2,811만원** |

---

## 5. 전체 인프라 비용 (Primary + DR)

### 5.1 월간 총 비용

| 구분 | 월 비용 (USD) | 월 비용 (KRW) |
|------|--------------|---------------|
| **Primary Region (Jakarta)** | | |
| - 컴퓨팅 | $1,270 | 1,714,500 |
| - 데이터베이스 | $680 | 918,000 |
| - 스토리지 | $150 | 202,500 |
| - 네트워킹 | $139 | 187,650 |
| - 보안/모니터링 | $135 | 182,250 |
| - 관리형 서비스 | $90 | 121,500 |
| Primary 소계 | **$2,464** | **3,326,400** |
| | | |
| **DR Region (Singapore)** | **$1,411** | **1,904,850** |
| | | |
| **Amazon Bedrock (AI)** | **$2,000** | **2,700,000** |
| | | |
| **월간 총계** | **$5,875** | **약 793만원** |

### 5.2 연간 총 비용 (TCO)

| 항목 | 연간 (USD) | 연간 (KRW) |
|------|-----------|-----------|
| Primary 인프라 | $29,568 | 39,916,800 |
| DR 인프라 | $20,825 | 28,113,750 |
| Amazon Bedrock | $24,000 | 32,400,000 |
| Reserved Instance 할인 | -$8,000 | -10,800,000 |
| **인프라 연간 총계** | **$66,393** | **약 8,963만원** |
| | | |
| 유지보수 인건비 (1명) | - | 228,000,000 |
| | | |
| **연간 TCO** | | **약 3.18억원** |

---

## 6. DR 시나리오별 비용 비교

| 시나리오 | RTO | RPO | 월 DR 비용 | 연간 DR 비용 | 적합성 |
|----------|-----|-----|-----------|-------------|--------|
| **Backup Only** | 24h | 24h | $345 | $4,140 | ❌ 정부기관 부적합 |
| **Pilot Light** | 4-8h | 1h | $850 | $10,200 | △ 최소 요구사항 |
| **Warm Standby** | 30min | 5min | **$1,411** | **$16,932** | ✅ **권장** |
| **Hot Standby** | <5min | 실시간 | $2,800 | $33,600 | ◎ 고가용성 필요시 |
| **Active-Active** | 0 | 0 | $4,500+ | $54,000+ | ◎◎ 미션크리티컬 |

---

## 7. Failover 프로세스

### 7.1 자동 Failover 흐름

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              DISASTER DETECTION                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
                                         │
     ┌───────────────────────────────────┼───────────────────────────────────┐
     │                                   │                                   │
     ▼                                   ▼                                   ▼
┌─────────────┐                   ┌─────────────┐                   ┌─────────────┐
│ CloudWatch  │                   │  Route 53   │                   │  GuardDuty  │
│   Alarms    │                   │Health Check │                   │   Alerts    │
│ (Metrics)   │                   │ (Endpoint)  │                   │  (Security) │
└──────┬──────┘                   └──────┬──────┘                   └──────┬──────┘
       │                                 │                                 │
       └─────────────────────────────────┼─────────────────────────────────┘
                                         │
                                         ▼
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              FAILOVER DECISION                                           │
│                                                                                         │
│   ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│   │                            EventBridge Rule                                      │   │
│   │                                                                                   │   │
│   │   IF (Primary_Health_Check = UNHEALTHY) AND (Duration > 5 minutes)              │   │
│   │   AND (Consecutive_Failures > 3)                                                 │   │
│   │   THEN → Trigger Failover                                                        │   │
│   │                                                                                   │   │
│   └─────────────────────────────────────────────────────────────────────────────────┘   │
│                                         │                                               │
└─────────────────────────────────────────┼───────────────────────────────────────────────┘
                                         │
                                         ▼
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              FAILOVER EXECUTION                                          │
│                                                                                         │
│   Step 1: DNS Failover (Automatic - Route 53)                                          │
│   ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│   │  Route 53 Failover Record: snsmon.example.com                                    │   │
│   │  Primary: ALB-Jakarta (UNHEALTHY) → Secondary: ALB-Singapore (HEALTHY)          │   │
│   │  TTL: 60 seconds                                                                 │   │
│   └─────────────────────────────────────────────────────────────────────────────────┘   │
│                                         │                                               │
│   Step 2: Database Promotion (Lambda Trigger)                                          │
│   ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│   │  RDS Read Replica → Promote to Primary (~5-10 minutes)                           │   │
│   │  Redis Global Datastore → Promote Singapore to Primary (~1 minute)               │   │
│   │  OpenSearch → Switch to Singapore cluster                                        │   │
│   └─────────────────────────────────────────────────────────────────────────────────┘   │
│                                         │                                               │
│   Step 3: Compute Scale-up (Auto Scaling)                                              │
│   ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│   │  ECS Service: 2 tasks → 4 tasks (match production capacity)                      │   │
│   │  Target Tracking: CPU > 70% → Scale out                                          │   │
│   └─────────────────────────────────────────────────────────────────────────────────┘   │
│                                         │                                               │
│   Step 4: Notification                                                                  │
│   ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│   │  SNS → Operations Team (Email, SMS, Slack)                                       │   │
│   │  PagerDuty → On-call Engineer                                                    │   │
│   │  Status Page → Customer notification                                             │   │
│   └─────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                         │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

### 7.2 Failover 소요 시간

| 단계 | 작업 | 예상 소요 시간 |
|------|------|---------------|
| 1 | 장애 감지 (Health Check) | 1-3분 |
| 2 | DNS Failover (Route 53) | 1분 (TTL) |
| 3 | RDS Replica Promotion | 5-10분 |
| 4 | Redis Failover | 1분 |
| 5 | ECS Task Scaling | 2-5분 |
| 6 | End-to-end Validation | 5분 |
| **Total RTO** | | **15-25분** |

---

## 8. DR 테스트 계획

### 8.1 정기 테스트 일정

| 테스트 유형 | 주기 | 예상 비용 | 영향도 |
|-------------|------|----------|--------|
| Failover Drill (Full) | 분기별 | $200 | 다운타임 30분 |
| Component Test | 월별 | $50 | 무중단 |
| Backup Restore Test | 월별 | $30 | 무중단 |
| Runbook Review | 월별 | $0 | 무중단 |

### 8.2 연간 DR 테스트 비용

| 항목 | 횟수 | 단가 | 연간 비용 |
|------|------|------|----------|
| Full Failover Test | 4회 | $200 | $800 |
| DR Infra Scale-up | 4회 | $100 | $400 |
| Data Validation | 12회 | $30 | $360 |
| **테스트 총계** | | | **$1,560** |

---

## 9. 최종 비용 요약

### Primary + DR + 유지보수 전체 비용

| 구분 | 월간 (USD) | 연간 (USD) | 연간 (KRW) |
|------|-----------|-----------|-----------|
| **인프라** | | | |
| Primary Region | $2,464 | $29,568 | 39,916,800 |
| DR Region (Warm Standby) | $1,411 | $16,932 | 22,857,200 |
| Amazon Bedrock | $2,000 | $24,000 | 32,400,000 |
| DR 테스트 비용 | - | $1,560 | 2,106,000 |
| **인프라 소계** | **$5,875** | **$72,060** | **97,280,000** |
| | | | |
| **Reserved Instance 할인** | | -$8,500 | -11,475,000 |
| | | | |
| **인프라 최종** | | **$63,560** | **약 8,580만원** |
| | | | |
| **유지보수 (1명, 24시간)** | | | **228,000,000** |
| | | | |
| **연간 TCO** | | | **약 3.14억원** |

### 시나리오별 연간 총비용

| 시나리오 | Primary | DR | Bedrock | RI 할인 | 인건비 | **총계** |
|----------|---------|-----|---------|--------|--------|----------|
| DR 없음 | 3,992만 | - | 3,240만 | -1,148만 | 2.28억 | **2.89억** |
| Pilot Light | 3,992만 | 1,020만 | 3,240만 | -1,148만 | 2.28억 | **2.99억** |
| **Warm Standby** | 3,992만 | 2,286만 | 3,240만 | -1,148만 | 2.28억 | **3.14억** |
| Hot Standby | 3,992만 | 3,360만 | 3,240만 | -1,148만 | 2.28억 | **3.24억** |

---

## 10. 권장사항

### 10.1 DR 구성 권장

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                    권장 사항                                             │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                         │
│  ✅ Warm Standby DR 권장                                                                │
│                                                                                         │
│  이유:                                                                                  │
│  1. 인도네시아 정부기관 서비스로서 적절한 가용성 (RTO 30분, RPO 5분)                   │
│  2. Hot Standby 대비 월 $1,400 절감 (연 1,680만원)                                      │
│  3. 자동 Failover로 운영 부담 최소화                                                   │
│  4. 데이터 손실 최소화 (5분 이내 RPO)                                                  │
│                                                                                         │
│  추가 권장:                                                                             │
│  • 1년 Reserved Instance 계약으로 연 1,148만원 절감                                    │
│  • 분기별 DR 테스트 필수 (연 4회)                                                      │
│  • 장애 대응 Runbook 문서화                                                            │
│                                                                                         │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

### 10.2 비용 최적화 옵션

| 옵션 | 절감액 (연간) | 구현 난이도 |
|------|-------------|------------|
| Reserved Instance (1년) | $8,500 (1,148만원) | 쉬움 |
| Savings Plans | $6,000 (810만원) | 쉬움 |
| Spot Instance (Crawler) | $3,000 (405만원) | 중간 |
| S3 Intelligent-Tiering | $500 (68만원) | 쉬움 |
| **총 최적화 가능액** | **$18,000 (2,430만원)** | |

---

**문서 버전**: 2.0
**작성자**: SNSMON-AI Infrastructure Team
